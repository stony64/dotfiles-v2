#!/usr/bin/env bash
#
# ┌───────────────────────────────────────────────────────────────────────────┐
# │ FILE: home/.bashaliases                                                   │
# │ ZWECK: Plattformübergreifende Aliase für interaktive Shells               │
# │ STANDARDS: Bash >= 4.0, Modulares Dotfiles-System                         │
# └───────────────────────────────────────────────────────────────────────────┘

# Hinweis: Diese Datei wird üblicherweise von der .bashrc gesourct.
# Da Aliase in Skripten standardmäßig nicht expandiert werden, ist diese
# Datei primär für die interaktive Nutzung optimiert.

# ──────────────────────────────────────────────────────────────
# 1. PLATTFORM-DETEKTION (Fallback-Logik)
# ──────────────────────────────────────────────────────────────
# Falls $PLATFORM nicht durch .bashenv gesetzt wurde, ermitteln wir sie hier.
if [[ -z "${PLATFORM:-}" ]]; then
    case "$(uname -s)" in
        Linux*)  _OS="linux" ;;
        MSYS*|MINGW*|CYGWIN*) _OS="windows" ;;
        *) _OS="unknown" ;;
    esac
else
    _OS="$PLATFORM"
fi

# ──────────────────────────────────────────────────────────────
# 2. NAVIGATION & BASIS-BEFEHLE
# ──────────────────────────────────────────────────────────────

# Schnelle Navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias -- -='cd -'

# Verzeichnis-Listing (Farben & Sortierung)
_LS_COMMON="--color=auto --group-directories-first"
if [[ "$_OS" == "linux" ]]; then
    alias ls="ls $_LS_COMMON"
    alias ll="ls -lah $_LS_COMMON"
elif [[ "$_OS" == "windows" ]]; then
    # --show-control-chars für korrekte Umlaut-Darstellung in Git Bash
    alias ls="ls $_LS_COMMON --show-control-chars"
    alias ll="ls -lah $_LS_COMMON --show-control-chars"
else
    alias ls="ls --color=auto"
    alias ll="ls -la"
fi

alias l='ls -CF'
alias la='ls -A'

# ──────────────────────────────────────────────────────────────
# 3. SICHERHEIT & SCHUTZ (Interaktive Bestätigung)
# ──────────────────────────────────────────────────────────────
# Verhindert unbeabsichtigten Datenverlust bei Standardoperationen.
alias cp='cp -i'
alias mv='mv -i'
alias rm='rm -i'
alias ln='ln -i'

# ──────────────────────────────────────────────────────────────
# 4. WERKZEUG-OPTIMIERUNG (Defaults)
# ──────────────────────────────────────────────────────────────

# Suche mit Farben
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# System-Übersicht (Human Readable)
alias df='df -h'
alias du='du -h'

# ──────────────────────────────────────────────────────────────
# 5. PLATTFORMSPEZIFISCHE ERWEITERUNGEN
# ──────────────────────────────────────────────────────────────

if [[ "$_OS" == "linux" ]]; then
    # System-Management (Debian/Ubuntu-basiert)
    alias update='sudo apt update && sudo apt upgrade'
    alias jc='journalctl -xe'
    alias sc='systemctl'
    alias pkg-search='apt-cache search'
elif [[ "$_OS" == "windows" ]]; then
    # Windows/Git-Bash Integration
    alias explorer='explorer . '
    alias code='code . '
    # Schneller Zugriff auf das native Windows-Home
    if [[ -n "${USERPROFILE:-}" ]]; then
         alias cwin='cd "$(cygpath "$USERPROFILE")"'
    fi
fi

# ──────────────────────────────────────────────────────────────
# 6. DOTFILES-MANAGEMENT & UTILS
# ──────────────────────────────────────────────────────────────

# Direkter Zugriff auf den Controller (Pfad-unabhängig via $HOME)
alias dctl="${HOME}/.dotfiles/dotfilesctl.sh"

# Shell-Reload (lädt das gesamte Environment neu)
alias reload='source ~/.bashrc && echo "Environment erfolgreich neu geladen."'

# Zeigt den PATH übersichtlich formatiert an (pro Zeile ein Eintrag)
alias path='echo -e "${PATH//:/\\n}"'

# Aufräumen lokaler Variablen
unset _OS _LS_COMMON
